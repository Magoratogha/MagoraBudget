<form [formGroup]="form">
  <div class="d-flex flex-column w-100 align-items-center justify-content-center">
    <h1 class="display-4 text-center">{{ ACCOUNT_TYPE_INFO_MAP[selectedAccountType()!].label }}</h1>
    @if (account()?.id) {
      <div class="chip-badge">Editando</div>
    }
    <div class="btn-group btn-group-lg mt-4 mb-5" role="group">
      @for (type of Object.keys(AccountType); track type) {
        @if (!isNaN(Number(type))) {
          <input autocomplete="off" type="radio" class="btn-check" [id]="type" [value]="Number(type)"
                 formControlName="type">
          <label class="btn btn-outline-light d-flex align-items-center justify-content-center gap-1" [for]="type"
                 (click)="changeAccountType(Number(type))">
            <i class="d-flex bi" [ngClass]="$any(ACCOUNT_TYPE_INFO_MAP)[type].iconClass"></i>
          </label>
        }
      }
    </div>
    <mat-form-field>
      <mat-label>{{ labelPlaceholder().label }}</mat-label>
      <input autocomplete="off" matInput [placeholder]="labelPlaceholder().placeholder" formControlName="label">
      <mat-icon class="material-icons-outlined" matPrefix>label</mat-icon>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{ balanceLabelAndPlaceholder().label }}</mat-label>
      <input autocomplete="off" matInput [placeholder]="balanceLabelAndPlaceholder().placeholder"
             formControlName="balance"
             mask="separator.0" thousandSeparator="." inputmode="numeric" pattern="[0-9]*">
      <mat-icon class="material-icons-outlined" matPrefix>attach_money</mat-icon>
    </mat-form-field>
    @if (selectedAccountType() !== AccountType.Savings && selectedAccountType() !== AccountType.Cash) {
      <mat-form-field>
        <mat-label>{{ quotaLabelAndPlaceholder()!.label }}</mat-label>
        <input autocomplete="off" matInput [placeholder]="quotaLabelAndPlaceholder()!.placeholder"
               formControlName="quota"
               [errorStateMatcher]="quotaValueErrorStateMatcher"
               mask="separator.0" thousandSeparator="." inputmode="numeric" pattern="[0-9]*">
        <mat-icon class="material-icons-outlined" matPrefix>attach_money</mat-icon>
      </mat-form-field>
    }
  </div>
</form>

<div class="d-flex flex-column gap-2">
  <button class="btn btn-light w-100" [disabled]="!form.valid" (click)="saveAccount()">Guardar</button>
  @if (account()?.id) {
    <button class="btn btn-danger w-100" (click)="deleteAccount()">Eliminar</button>
  }
  <button class="btn btn-outline-light w-100" (click)="cancel()">Cancelar</button>
</div>
