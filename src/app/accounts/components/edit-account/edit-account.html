<form [formGroup]="form">
  <div class="d-flex flex-column w-100 align-items-center justify-content-center">
    @if (account()?.id) {
      <span class="edit-warning">Editando</span>
    }
    <h1 class="display-4 fw-normal mt-3">{{ ACCOUNT_TYPE_INFO_MAP[form.get('type')?.value!].label }}</h1>
    <div class="btn-group btn-group-lg mt-4 mb-5" role="group">
      @for (type of Object.keys(AccountType); track type) {
        @if (!isNaN(Number(type))) {
          <input type="radio" class="btn-check" [id]="type" autocomplete="off" [value]="Number(type)"
                 formControlName="type">
          <label class="btn btn-outline-light d-flex align-items-center justify-content-center gap-1" [for]="type"
                 (click)="changeAccountType(Number(type))">
            <i class="d-flex bi" [ngClass]="$any(ACCOUNT_TYPE_INFO_MAP)[type].iconClass"></i>
          </label>
        }
      }
    </div>
    <mat-form-field>
      <mat-label>Nombre</mat-label>
      <input matInput [placeholder]="labelPlaceholder" formControlName="label">
      <mat-icon class="material-icons-outlined" matPrefix>label</mat-icon>
    </mat-form-field>
    <mat-form-field>
      @switch (form.get('type')?.value) {
        @case (AccountType.Cash) {
          <mat-label>Cuánto efectivo tienes?</mat-label>
        }
        @case (AccountType.Savings) {
          <mat-label>Cuál es el saldo actual?</mat-label>
        }
        @case (AccountType.CreditCard)
        @case (AccountType.Debt) {
          <mat-label>Cuánto debes a día de hoy?</mat-label>
        }
        @case (AccountType.SavingsGoal) {
          <mat-label>Cuánto llevas ahorrado?</mat-label>
        }
      }
      <input matInput placeholder="123.456.789" formControlName="balance" mask="separator.0" thousandSeparator="." inputmode="numeric" pattern="[0-9]*">
      <mat-icon class="material-icons-outlined" matPrefix>attach_money</mat-icon>
    </mat-form-field>
    @if (form.get('type')?.value !== AccountType.Savings && form.get('type')?.value !== AccountType.Cash) {
      <mat-form-field>
        @switch (form.get('type')?.value) {
          @case (AccountType.CreditCard) {
            <mat-label>Cuánto cupo tiene la tarjeta?</mat-label>
          }
          @case (AccountType.Debt) {
            <mat-label>Cuál es el valor total de la deuda?</mat-label>
          }
          @case (AccountType.SavingsGoal) {
            <mat-label>Cuánto quieres ahorrar?</mat-label>
          }
        }
        <input matInput placeholder="123.456.789" formControlName="quota" mask="separator.0" thousandSeparator="." inputmode="numeric" pattern="[0-9]*">
        <mat-icon class="material-icons-outlined" matPrefix>attach_money</mat-icon>
      </mat-form-field>
    }
  </div>
</form>

<div class="d-flex flex-column gap-2">
  <button class="btn btn-light w-100" [disabled]="!form.valid" (click)="saveAccount()">Guardar</button>
  <button class="btn btn-outline-light w-100" (click)="cancel()">Cancelar</button>
</div>
